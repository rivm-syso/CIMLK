<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<alignment xmlns="http://www.esdi-humboldt.eu/hale/alignment">
    <cell relation="eu.esdihumboldt.cst.functions.groovy.retype" id="C5ccd5feb-4a02-4f40-80a8-1b0b7d149ca4" priority="highest">
        <source>
            <class>
                <type name="StalType" ns="http://cimlk.nl/1.0"/>
            </class>
        </source>
        <target>
            <class>
                <type name="StalType" ns="http://cimlk.nl/1.0"/>
            </class>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
withTransformationContext{&#xD;
	def c = _.context.collector(it)&#xD;
	c.stalIdentificatie[_source.p.id.value()] = _source.p.identificatie.NEN3610ID.lokaalID.value().substring(2)&#xD;
	c.stalLengte[_source.p.id.value()] = _source.p.lengte.value()&#xD;
	c.stalBreedte[_source.p.id.value()] = _source.p.breedte.value()&#xD;
	c.stalHoogte[_source.p.id.value()] = _source.p.hoogte.value()&#xD;
	c.stalOrientatie[_source.p.id.value()] = _source.p.orientatie.value()&#xD;
	c.stalIdentificatiePandBAG[_source.p.id.value()] = _source.p.identificatiePandBAG.value()&#xD;
	c.stalX[_source.p.id.value()] = _source.p.geometrie.Point.pos.value()[0]&#xD;
	c.stalY[_source.p.id.value()] = _source.p.geometrie.Point.pos.value()[1]&#xD;
	String veehouderijhref = _source.p.veehouderij.href.value()&#xD;
	String veehouderijid = veehouderijhref.substring(1)&#xD;
	c.veehouderijIdentificatie[_source.p.id.value()] = veehouderijid&#xD;
	c.veehouderijId[_source.p.id.value()] = veehouderijid.substring(10)&#xD;
}&#xD;
&#xD;

</core:text>
        </complexParameter>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.retype" id="C0042928f-9ae1-4fab-ab46-65d37f3670a0" priority="highest">
        <source>
            <class>
                <type name="VeehouderijType" ns="http://cimlk.nl/1.0"/>
            </class>
        </source>
        <target>
            <class>
                <type name="VeehouderijType" ns="http://cimlk.nl/1.0"/>
            </class>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
withTransformationContext{&#xD;
	def c = _.context.collector(it)&#xD;
	c.veehouderijAdres[_source.p.id.value()] = _source.p.adres.value()&#xD;
	c.veehouderijDatumVergunning[_source.p.id.value()] = _source.p.datumVergunning.value()&#xD;
	_log.info('PUT ' + _source.p.id.value() + '=' + _source.p.datumVergunning.value())&#xD;
}
</core:text>
        </complexParameter>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.retype" id="Cb4ae94c1-cae8-4938-a6b8-21eb8f9f3aa0" priority="normal">
        <source>
            <class>
                <type name="ReceptorVeehouderijType" ns="http://cimlk.nl/1.0"/>
            </class>
        </source>
        <target>
            <class>
                <type name="Veehouderij_receptoren"/>
            </class>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C19e9d63f-e315-435c-bb0e-43fdf1c46d43" priority="normal">
        <source>
            <property>
                <type name="ReceptorVeehouderijType" ns="http://cimlk.nl/1.0"/>
                <child name="grondslag" ns="http://cimlk.nl/1.0"/>
            </property>
        </source>
        <target>
            <property>
                <type name="Veehouderij_receptoren"/>
                <child name="grondslag"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy" id="Ca2403a5b-9a95-4073-96d4-18d10623bc67" priority="normal">
        <source name="var">
            <property>
                <type name="ReceptorVeehouderijType" ns="http://cimlk.nl/1.0"/>
                <child name="identificatie" ns="http://cimlk.nl/1.0"/>
                <child name="NEN3610ID" ns="http://cimlk.nl/1.0"/>
                <child name="lokaalID" ns="http://cimlk.nl/1.0"/>
            </property>
        </source>
        <target name="result">
            <property>
                <type name="Veehouderij_receptoren"/>
                <child name="identificatie"/>
            </property>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">return identificatie_NEN3610ID_lokaalID.substring(3)</core:text>
        </complexParameter>
        <parameter value="false" name="variablesAsInstances"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration">
                <core:content>
                    <core:text xml:space="preserve">The cell's entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="Cfb03642f-d9c3-40ba-b74d-70b3abbb90d9" priority="normal">
        <source>
            <property>
                <type name="ReceptorVeehouderijType" ns="http://cimlk.nl/1.0"/>
                <child name="identificatiePandBAG" ns="http://cimlk.nl/1.0"/>
            </property>
        </source>
        <target>
            <property>
                <type name="Veehouderij_receptoren"/>
                <child name="identificatiePandBAG"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C135bf9b8-a89f-46a2-99cc-d80a69108e62" priority="normal">
        <source>
            <property>
                <type name="ReceptorVeehouderijType" ns="http://cimlk.nl/1.0"/>
                <child name="naam" ns="http://cimlk.nl/1.0"/>
            </property>
        </source>
        <target>
            <property>
                <type name="Veehouderij_receptoren"/>
                <child name="naam"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="Cdd9b1325-1fc8-4dca-bbe8-655a50858b3d" priority="normal">
        <source>
            <property>
                <type name="ReceptorVeehouderijType" ns="http://cimlk.nl/1.0"/>
                <child name="opmerking" ns="http://cimlk.nl/1.0"/>
            </property>
        </source>
        <target>
            <property>
                <type name="Veehouderij_receptoren"/>
                <child name="opmerking"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C5cb7c66f-a7c2-49d3-bdb0-c825ff5de22a" priority="normal">
        <source>
            <property>
                <type name="ReceptorVeehouderijType" ns="http://cimlk.nl/1.0"/>
                <child name="tijdstipRegistratie" ns="http://cimlk.nl/1.0"/>
            </property>
        </source>
        <target>
            <property>
                <type name="Veehouderij_receptoren"/>
                <child name="tijdstipRegistratie"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C1eb6e672-34bd-4f34-a16b-e12d2e8e7109" priority="normal">
        <source>
            <property>
                <type name="ReceptorVeehouderijType" ns="http://cimlk.nl/1.0"/>
                <child name="toetspuntSoort" ns="http://cimlk.nl/1.0"/>
            </property>
        </source>
        <target>
            <property>
                <type name="Veehouderij_receptoren"/>
                <child name="toetspuntSoort"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy" id="C0e913749-89ef-4a83-86c6-39e896a13a56" priority="normal">
        <source name="var">
            <property>
                <type name="ReceptorVeehouderijType" ns="http://cimlk.nl/1.0"/>
                <child name="veehouderij" ns="http://cimlk.nl/1.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </source>
        <target name="result">
            <property>
                <type name="Veehouderij_receptoren"/>
                <child name="veehouderijIdentificatie"/>
            </property>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
String href = veehouderij_href&#xD;
return href.substring(11)
</core:text>
        </complexParameter>
        <parameter value="false" name="variablesAsInstances"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration">
                <core:content>
                    <core:text xml:space="preserve">The cell's entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy" id="C6ab2cd9a-f96c-4ced-8557-f2d6680e5519" priority="normal">
        <source name="var">
            <property>
                <type name="ReceptorVeehouderijType" ns="http://cimlk.nl/1.0"/>
                <child name="geometrie" ns="http://cimlk.nl/1.0"/>
                <child name="Point" ns="http://www.opengis.net/gml/3.2"/>
                <child name="choice_1" ns="http://www.opengis.net/gml/3.2/PointType"/>
                <child name="pos" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </source>
        <target name="result">
            <property>
                <type name="Veehouderij_receptoren"/>
                <child name="x"/>
            </property>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">return geometrie_Point_choice_1_pos[0]</core:text>
        </complexParameter>
        <parameter value="false" name="variablesAsInstances"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration">
                <core:content>
                    <core:text xml:space="preserve">The cell's entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy" id="C5dae8c4f-3e1b-4f32-9147-0daedd6a95fd" priority="normal">
        <source name="var">
            <property>
                <type name="ReceptorVeehouderijType" ns="http://cimlk.nl/1.0"/>
                <child name="geometrie" ns="http://cimlk.nl/1.0"/>
                <child name="Point" ns="http://www.opengis.net/gml/3.2"/>
                <child name="choice_1" ns="http://www.opengis.net/gml/3.2/PointType"/>
                <child name="pos" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </source>
        <target name="result">
            <property>
                <type name="Veehouderij_receptoren"/>
                <child name="y"/>
            </property>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">return geometrie_Point_choice_1_pos[1]</core:text>
        </complexParameter>
        <parameter value="false" name="variablesAsInstances"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration">
                <core:content>
                    <core:text xml:space="preserve">The cell's entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.retype" id="C035d45a8-b1da-43dc-950c-69d18b427978" priority="lowest">
        <source>
            <class>
                <type name="VeehouderijbronType" ns="http://cimlk.nl/1.0"/>
            </class>
        </source>
        <target>
            <class>
                <type name="Veehouderijen"/>
            </class>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
def c = _.context.collector()&#xD;
&#xD;
_source.p.emissiespecificaties.each { maatregel -&gt;&#xD;
	_target {&#xD;
		bronX(_source.p.geometrie.Point.pos.value()[0])&#xD;
		bronY(_source.p.geometrie.Point.pos.value()[1])&#xD;
		bronHoogte(_source.p.hoogte.value())&#xD;
		bronDiameter(_source.p.diameter.value())&#xD;
		bronUittreesnelheid(_source.p.uittreesnelheid.value())&#xD;
		tijdstipRegistratie(_source.p.tijdstipRegistratie.value())&#xD;
		bronIdentificatie(_source.p.identificatie.NEN3610ID.lokaalID.value().substring(2))&#xD;
		aantalDieren(maatregel.p.Emissiespecificatie.aantalDieren.value())&#xD;
		emissiefactorPM10(maatregel.p.Emissiespecificatie.eigenEmissiefactorPm10.value())&#xD;
		reductiefactorPM10(maatregel.p.Emissiespecificatie.eigenReductiefactorPm10.value())&#xD;
		eigenFactorToelichting(maatregel.p.Emissiespecificatie.eigenFactorToelichting.value())&#xD;
		opmerking(maatregel.p.Emissiespecificatie.opmerking.value())&#xD;
		huisvestingssysteem(maatregel.p.Emissiespecificatie.huisvestingssysteem.href.value())&#xD;
		aanvullendeTechniek(maatregel.p.Emissiespecificatie.aanvullendeTechniek.href.value())&#xD;
		String stalhref = _source.p.stal.href.value()&#xD;
		String stalid = stalhref.substring(1)&#xD;
		stalIdentificatie(c.stalIdentificatie[stalid].value())&#xD;
		stalHoogte(c.stalHoogte[stalid].value())&#xD;
		stalBreedte(c.stalBreedte[stalid].value())&#xD;
		stalLengte(c.stalLengte[stalid].value())&#xD;
		stalOrientatie(c.stalOrientatie[stalid].value())&#xD;
		stalIdentificatiePandBAG(c.stalIdentificatiePandBAG[stalid].value())&#xD;
		stalX(c.stalX[stalid].value())&#xD;
		stalY(c.stalY[stalid].value())&#xD;
		veehouderijIdentificatie(c.veehouderijId[stalid].value())&#xD;
		String veehouderijidentificatie = c.veehouderijIdentificatie[stalid].value()&#xD;
		veehouderijAdres(c.veehouderijAdres[veehouderijidentificatie].value())&#xD;
		String datumvergunning = c.veehouderijDatumVergunning[veehouderijidentificatie].value()&#xD;
		if (datumvergunning) {&#xD;
			String datumvergunningNL = datumvergunning.substring(8,10)+'-'+datumvergunning.substring(5,7)+'-'+datumvergunning.substring(0,4)&#xD;
			veehouderijDatumVergunning(datumvergunningNL)&#xD;
		}&#xD;
	}&#xD;
}
</core:text>
        </complexParameter>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration">
                <core:content>
                    <core:text xml:space="preserve">The cell's entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.formattedstring" id="C8dfa4b13-c660-42fa-b59b-2c44c8cb52af" priority="normal">
        <source name="var">
            <property>
                <type name="VeehouderijType" ns="http://cimlk.nl/1.0"/>
                <child name="identificatie" ns="http://cimlk.nl/1.0"/>
                <child name="NEN3610ID" ns="http://cimlk.nl/1.0"/>
                <child name="lokaalID" ns="http://cimlk.nl/1.0"/>
            </property>
        </source>
        <target>
            <property>
                <type name="Veehouderijen"/>
                <child name="veehouderijIdentificatie"/>
            </property>
        </target>
        <parameter value="{lokaalID}" name="pattern"/>
    </cell>
</alignment>
